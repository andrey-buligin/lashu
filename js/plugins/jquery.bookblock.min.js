(function(){var e=jQuery.event,t=function(e,t,n,r){var i,s,o,u,a,f,l,c,h;for(i=0;i<t.length;i++){s=t[i],u=s.indexOf(".")<0,u||(l=s.split("."),s=l.shift(),c=new RegExp("(^|\\.)"+l.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),o=(e[s]||[]).slice(0);for(a=0;a<o.length;a++)f=o[a],h=u||c.test(f.namespace),h&&(r?f.selector===r&&n(s,f.origHandler||f.handler):r===null?n(s,f.origHandler||f.handler,f.selector):f.selector||n(s,f.origHandler||f.handler))}};e.find=function(e,n,r){var i=($._data(e)||{}).events,s=[],o,u,a;return i?(t(i,n,function(e,t){s.push(t)},r),s):s},e.findBySelector=function(e,n){var r=$._data(e).events,i={},s=function(e,t,n){var r=i[e]||(i[e]={}),s=r[t]||(r[t]=[]);s.push(n)};return r?(t(r,n,function(e,t,n){s(n||"",e,t)},null),i):i},e.supportTouch="ontouchend"in document,$.fn.respondsTo=function(t){return this.length?e.find(this[0],$.isArray(t)?t:[t]).length>0:!1},$.fn.triggerHandled=function(e,t){return e=typeof e=="string"?$.Event(e):e,this.trigger(e,t),e.handled},e.setupHelper=function(t,n,r){r||(r=n,n=null);var i=function(i){var s,o=i.selector||"";o?(s=e.find(this,t,o),s.length||$(this).delegate(o,n,r)):e.find(this,t,o).length||e.add(this,n,r,{selector:o,delegate:this})},s=function(i){var s,o=i.selector||"";o?(s=e.find(this,t,o),s.length||$(this).undelegate(o,n,r)):e.find(this,t,o).length||e.remove(this,n,r,{selector:o,delegate:this})};$.each(t,function(){e.special[this]={add:i,remove:s,setup:function(){},teardown:function(){}}})}})(jQuery),function(e){var t=/Phantom/.test(navigator.userAgent),n=!t&&"ontouchend"in document,r="touchmove scroll",i=n?"touchstart":"mousedown",s=n?"touchend":"mouseup",o=n?"touchmove":"mousemove",u=function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)}},a=e.event.swipe={delay:500,max:75,min:30};e.event.setupHelper(["swipe","swipeleft","swiperight","swipeup","swipedown"],i,function(t){function c(e){if(!n)return;r=u(e),Math.abs(n.coords[0]-r.coords[0])>10&&e.preventDefault()}var n=u(t),r,i=t.delegateTarget||t.currentTarget,f=t.handleObj.selector,l=this;e(document.documentElement).bind(o,c).one(s,function(s){e(this).unbind(o,c);if(n&&r){var u=Math.abs(n.coords[0]-r.coords[0]),h=Math.abs(n.coords[1]-r.coords[1]),p=Math.sqrt(u*u+h*h);if(r.time-n.time<a.delay&&p>=a.min){var d=["swipe"];u>=a.min&&h<a.min?d.push(n.coords[0]>r.coords[0]?"swipeleft":"swiperight"):h>=a.min&&u<a.min&&d.push(n.coords[1]<r.coords[1]?"swipedown":"swipeup"),e.each(e.event.find(i,d,f),function(){this.call(l,t,{start:n,end:r})})}}n=r=undefined})})}(jQuery),function(e,t,n){var r=t.Modernizr;e.BookBlock=function(t,n){this.$el=e(n),this._init(t)},e.BookBlock.defaults={speed:1e3,easing:"ease-in-out",shadows:!0,shadowSides:.2,shadowFlip:.1,perspective:1300,circular:!1,nextEl:"",prevEl:"",autoplay:!1,interval:3e3,onEndFlip:function(e,t){return!1},onBeforeFlip:function(e){return!1}},e.BookBlock.prototype={_init:function(t){this.options=e.extend(!0,{},e.BookBlock.defaults,t),this.$el.css("perspective",this.options.perspective),this.$items=this.$el.children(".bb-item"),this.itemsCount=this.$items.length,this.current=0,this.$current=this.$items.eq(this.current).show(),this.elWidth=this.$el.width();var n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=n[r.prefixed("transition")],this.support=r.csstransitions&&r.csstransforms3d,this._initEvents(),this.options.autoplay&&(this.options.circular=!0,this._startSlideshow())},_initEvents:function(){var t=this;this.options.nextEl!==""&&e(this.options.nextEl).on("click.bookblock",function(){return t._stopSlideshow(),t._navigate("next"),!1}),this.options.prevEl!==""&&e(this.options.prevEl).on("click.bookblock",function(){return t._stopSlideshow(),t._navigate("prev"),!1})},next:function(){this._stopSlideshow(),this._navigate("next")},prev:function(){this._stopSlideshow(),this._navigate("prev")},jump:function(e){e-=1;if(e===this.current||e>=this.itemsCount||e<0)return!1;this._stopSlideshow(),this._navigate(e>this.current?"next":"prev",e)},isActive:function(){return this.isAnimating},_navigate:function(e,t){if(this.isAnimating)return!1;this.options.onBeforeFlip(this.current),this.isAnimating=!0,this.$current=this.$items.eq(this.current),t!==n?this.current=t:e==="next"?!this.options.circular&&this.current===this.itemsCount-1?this.end=!0:this.current=this.current<this.itemsCount-1?this.current+1:0:e==="prev"&&(!this.options.circular&&this.current===0?this.end=!0:this.current=this.current>0?this.current-1:this.itemsCount-1),!this.options.circular&&this.end?this.$nextItem=this.$current:this.$nextItem=this.$items.eq(this.current),this.support?this._layout(e):this._layoutNoSupport(e)},_layoutNoSupport:function(e){this.$items.hide(),this.$nextItem.show(),this.end=!1,this.isAnimating=!1;var t=e==="next"&&this.current===this.itemsCount-1||e==="prev"&&this.current===0;this.options.onEndFlip(this.current,t)},_layout:function(e){var t=this,n=this._addSide("left",e),r=this._addSide("middle",e),i=this._addSide("right",e),s=n.find("div.bb-overlay"),o=r.find("div.bb-flipoverlay:first"),u=r.find("div.bb-flipoverlay:last"),a=i.find("div.bb-overlay"),f=this.options.speed;this.$items.hide(),this.$el.prepend(n,r,i),this.end&&(f=400),r.css({transition:"all "+f+"ms "+this.options.easing}).on(this.transEndEventName,function(n){if(n.target.className==="bb-page"){t.$el.children("div.bb-page").remove(),t.$nextItem.show(),t.end=!1,t.isAnimating=!1;var r=e==="next"&&t.current===t.itemsCount-1||e==="prev"&&t.current===0;t.options.onEndFlip(t.current,r)}}),e==="prev"&&r.css({transform:"rotateY(-180deg)"});if(this.options.shadows&&!this.end){var l=e==="next"?{transition:"opacity "+this.options.speed/2+"ms "+"linear"+" "+this.options.speed/2+"ms"}:{transition:"opacity "+this.options.speed/2+"ms "+"linear",opacity:this.options.shadowSides},c=e==="next"?{transition:"opacity "+this.options.speed/2+"ms "+"linear"}:{transition:"opacity "+this.options.speed/2+"ms "+"linear"+" "+this.options.speed/2+"ms",opacity:this.options.shadowFlip},h=e==="next"?{transition:"opacity "+this.options.speed/2+"ms "+"linear"+" "+this.options.speed/2+"ms",opacity:this.options.shadowFlip}:{transition:"opacity "+this.options.speed/2+"ms "+"linear"},p=e==="next"?{transition:"opacity "+this.options.speed/2+"ms "+"linear",opacity:this.options.shadowSides}:{transition:"opacity "+this.options.speed/2+"ms "+"linear"+" "+this.options.speed/2+"ms"};o.css(c),u.css(h),s.css(l),a.css(p)}setTimeout(function(){var n=e==="next"?"rotateY(-180deg)":"rotateY(0deg)";t.end&&(n=e==="next"?"rotateY(-15deg)":"rotateY(-165deg)"),r.css({transform:n}),t.options.shadows&&!t.end&&(o.css({opacity:e==="next"?t.options.shadowFlip:0}),u.css({opacity:e==="next"?0:t.options.shadowFlip}),s.css({opacity:e==="next"?t.options.shadowSides:0}),a.css({opacity:e==="next"?0:t.options.shadowSides}))},30)},_addSide:function(t,n){var r;switch(t){case"left":r=e('<div class="bb-page"><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+(n==="next"?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",102);break;case"middle":r=e('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content" style="left:'+ -this.elWidth/2+"px;width:"+this.elWidth+'px"><div class="bb-inner">'+(n==="next"?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+(n==="next"?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-flipoverlay"></div></div></div></div>').css("z-index",103);break;case"right":r=e('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content" style="left:'+ -this.elWidth/2+"px;width:"+this.elWidth+'px"><div class="bb-inner">'+(n==="next"?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",101)}return r},_startSlideshow:function(){var e=this;this.slideshow=setTimeout(function(){e._navigate("next"),e.options.autoplay&&e._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.options.autoplay=!1)}};var i=function(e){t.console&&t.console.error(e)};e.fn.bookblock=function(t){var n=e.data(this,"bookblock");if(typeof t=="string"){var r=Array.prototype.slice.call(arguments,1);this.each(function(){if(!n){i("cannot call methods on bookblock prior to initialization; attempted to call method '"+t+"'");return}if(!e.isFunction(n[t])||t.charAt(0)==="_"){i("no such method '"+t+"' for bookblock instance");return}n[t].apply(n,r)})}else this.each(function(){n?n._init():n=e.data(this,"bookblock",new e.BookBlock(t,this))});return n}}(jQuery,window);var BookPage=function(){var e={$bookBlock:$("#bb-bookblock"),$navNext:$("#bb-nav-next"),$navPrev:$("#bb-nav-prev"),bb:$("#bb-bookblock").bookblock({speed:700,easing:"ease-out",perspective:1500,shadowSides:.8,shadowFlip:.7})},t=function(){e.$navNext.on("click",function(){return e.bb.next(),!1}),e.$navPrev.on("click",function(){return e.bb.prev(),!1}),e.$bookBlock.children().on({swipeleft:function(t){return e.bb.next(),!1},swiperight:function(t){return e.bb.prev(),!1}})};return{init:t}}();BookPage.init();